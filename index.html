<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ø³Ø§Ø¹Ø¯ÙŠ Ø§Ù„Ø´Ø®ØµÙŠ</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <style>
        :root { --bg: #f2f2f7; --card: #ffffff; --primary: #007aff; --danger: #ff3b30; --success: #34c759; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); margin: 0; padding: 20px; direction: rtl; text-align: right; }
        .header { padding: 30px 0 10px; text-align: center; }
        .card { background: var(--card); border-radius: 15px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        h2 { font-size: 17px; color: var(--primary); margin-top: 0; border-bottom: 1px solid #eee; padding-bottom: 8px; margin-bottom: 12px; }
        input, select { width: 100%; padding: 12px; margin: 8px 0; border-radius: 10px; border: 1px solid #ddd; box-sizing: border-box; font-size: 16px; background: #fafafa; }
        button { width: 100%; padding: 14px; background: var(--primary); color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; }
        .task-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid #f2f2f7; }
        .task-item:last-child { border: none; }
        .delete-btn { background: var(--danger); width: auto; padding: 6px 15px; font-size: 12px; border-radius: 8px; }
        .info { font-size: 12px; color: #8e8e93; margin-top: 4px; }
        .lecture-row { display: flex; justify-content: space-between; font-size: 14px; padding: 8px 0; border-bottom: 1px dotted #d1d1d6; }
        .lecture-row:last-child { border: none; }
        .lecture-row span:last-child { font-weight: bold; color: #555; }
    </style>
</head>
<body>

    <div class="header">
        <h1>Ù…Ø³Ø§Ø¹Ø¯ÙŠ Ø§Ù„Ø´Ø®ØµÙŠ</h1>
    </div>

    <div class="card" style="text-align: center;">
        <button onclick="requestPermission()" style="background: var(--success);">ğŸ”” ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</button>
        <p class="info">ÙŠØ¬Ø¨ Ø§Ù„ØªÙØ¹ÙŠÙ„ Ù„ØªØµÙ„Ùƒ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ ÙˆØ§Ù„Ù…Ù‡Ø§Ù…</p>
    </div>

    <div class="card">
        <h2>ğŸ“ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h2>
        <div id="activeTasks">
            </div>
    </div>

    <div class="card">
        <h2>ğŸš¬ Ù…Ø¤Ù‚Øª Ø§Ù„ØªØ¯Ø®ÙŠÙ†</h2>
        <div style="display: flex; gap: 10px;">
            <div style="flex: 1;">
                <label class="info">Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚</label>
                <input type="number" id="smokeInt" value="50">
            </div>
            <div style="flex: 1;">
                <label class="info">Ø§Ù„ØªÙƒØ±Ø§Ø±</label>
                <input type="number" id="smokeRepeat" value="10" max="20">
            </div>
        </div>
        <button style="background:#5856d6" onclick="startSmoke()">Ø¨Ø¯Ø¡ Ù…Ø¤Ù‚Øª Ø§Ù„ØªØ¯Ø®ÙŠÙ†</button>
    </div>

    <div class="card">
        <h2>ğŸ“… Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</h2>
        <div id="lectureList">
            <div class="lecture-row"><span>Ø§Ù„Ø§Ø«Ù†ÙŠÙ†: Ø§Ù„Ø¯ÙØ§Ø¹ Ø¹Ù† Ø§Ù„Ø´Ø¨ÙƒØ§Øª</span> <span>03:50 Ù…</span></div>
            <div class="lecture-row"><span>Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡: Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„ØªØ´ÙÙŠØ±</span> <span>03:50 Ù…</span></div>
            <div class="lecture-row"><span>Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡: Ø§Ù„ØªØ´Ø±ÙŠØ¹Ø§Øª Ø§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠØ©</span> <span>06:50 Ù…</span></div>
            <div class="lecture-row"><span>Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡: ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ</span> <span>03:50 Ù…</span></div>
            <div class="lecture-row"><span>Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡: Ø£Ù†Ø¸Ù…Ø© ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</span> <span>06:50 Ù…</span></div>
        </div>
    </div>

    <div class="card">
        <h2>â• Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2>
        <input type="text" id="taskName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©...">
        <label class="info">Ù…Ø¯Ø© Ø§Ù„Ù…Ù‡Ù…Ø© (Ø¨Ø§Ù„Ø£ÙŠØ§Ù…):</label>
        <select id="taskDuration">
            <option value="1">ÙŠÙˆÙ… ÙˆØ§Ø­Ø¯</option>
            <option value="2">ÙŠÙˆÙ…ÙŠÙ†</option>
            <option value="3">3 Ø£ÙŠØ§Ù…</option>
            <option value="4">4 Ø£ÙŠØ§Ù…</option>
            <option value="5">5 Ø£ÙŠØ§Ù…</option>
            <option value="6">6 Ø£ÙŠØ§Ù…</option>
            <option value="7">7 Ø£ÙŠØ§Ù…</option>
        </select>
        <button onclick="saveTask()">Ø­ÙØ¸ ÙˆØ¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…Ù‡Ù…Ø©</button>
    </div>

    <script>
        // Ù…ØµÙÙˆÙØ© ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ù‡Ø§Ù…
        let tasks = JSON.parse(localStorage.getItem('myTasks')) || [];

        // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function requestPermission() {
            if (!("Notification" in window)) {
                alert("Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª");
                return;
            }
            Notification.requestPermission().then(permission => {
                if (permission === "granted") {
                    new Notification("Ù…Ù…ØªØ§Ø²!", { body: "Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…ÙØ¹Ù„Ø© Ø§Ù„Ø¢Ù† ÙˆØ³Ù†ÙˆØ§ÙÙŠÙƒ Ø¨Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª." });
                }
            });
        }

        // Ø­ÙØ¸ Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©
        function saveTask() {
            const name = document.getElementById('taskName').value;
            const duration = document.getElementById('taskDuration').value;
            
            if (!name) {
                alert("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©");
                return;
            }

            const newTask = {
                id: Date.now(),
                name: name,
                duration: duration,
                date: new Date().toLocaleDateString('ar-SA')
            };

            tasks.push(newTask);
            localStorage.setItem('myTasks', JSON.stringify(tasks));
            renderTasks();
            
            // Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø¹Ø¯ Ø§Ù„Ø­ÙØ¸
            document.getElementById('taskName').value = '';
            alert(`ØªÙ… Ø¥Ø¶Ø§ÙØ© "${name}" ÙˆØ¬Ø¯ÙˆÙ„Ø© ØªÙ†Ø¨ÙŠÙ‡ ÙƒÙ„ 5 Ø³Ø§Ø¹Ø§Øª.`);
        }

        // Ø­Ø°Ù Ù…Ù‡Ù…Ø©
        function deleteTask(id) {
            tasks = tasks.filter(task => task.id !== id);
            localStorage.setItem('myTasks', JSON.stringify(tasks));
            renderTasks();
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‡Ø§Ù… ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        function renderTasks() {
            const container = document.getElementById('activeTasks');
            container.innerHTML = '';

            if (tasks.length === 0) {
                container.innerHTML = '<p class="info" style="text-align:center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… Ù†Ø´Ø·Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.</p>';
                return;
            }

            tasks.forEach(task => {
                const item = document.createElement('div');
                item.className = 'task-item';
                item.innerHTML = `
                    <div>
                        <strong>${task.name}</strong>
                        <div class="info">Ø§Ù„Ù…Ø¯Ø©: ${task.duration} Ø£ÙŠØ§Ù… | Ø§Ù„ØªØ§Ø±ÙŠØ®: ${task.date}</div>
                    </div>
                    <button class="delete-btn" onclick="deleteTask(${task.id})">Ø­Ø°Ù</button>
                `;
                container.appendChild(item);
            });
        }

        // Ù…Ø¤Ù‚Øª Ø§Ù„ØªØ¯Ø®ÙŠÙ†
        function startSmoke() {
            const mins = document.getElementById('smokeInt').value;
            const reps = document.getElementById('smokeRepeat').value;
            alert(`ØªÙ… Ø¨Ø¯Ø¡ Ù…Ø¤Ù‚Øª Ø§Ù„ØªØ¯Ø®ÙŠÙ†. ØªÙ†Ø¨ÙŠÙ‡ ÙƒÙ„ ${mins} Ø¯Ù‚ÙŠÙ‚Ø©ØŒ Ù„Ø¹Ø¯Ø¯ ${reps} Ù…Ø±Ø§Øª.`);
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙˆÙ„ÙŠ
        renderTasks();
    </script>
</body>
</html>